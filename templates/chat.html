{% extends "base.html" %}
{% block head %} {% load md5url %}
	<script>
		const API_URL = "{{ apiUrl }}";
		const SMILEYS_JSON_URL = "{% md5url 'smileys/info.json'  %}";
		const SMILEY_URL = "{% md5url "smileys/" %}";
	</script>
	<script src="{% md5url "js/chat.js" %}"></script>
	<link rel="stylesheet" type="text/css" href="{% md5url 'css/chat.css' %}">
{% endblock head %}
{% block navbar %}
	<li><i title="Show all users"
			 onclick="CssUtils.toggleVisibility(chatUserRoomWrapper)" class="icon-users very-small-screen"><span class="mText">users</span></i></li>
	<li><i class="icon-clear" title="CLear local history"
			 onclick="clearLocalHistory()"><span class="mText">clear</span></i></li>
	<li>
	<i class="icon-phone" title="Make a video/mic call"
			 onclick="showCallDialog()"><span class="mText">Call</span></i>
	</li>
{% endblock navbar %}
{% block content %}
	<div>
		<audio id="chatIncoming" src="{% md5url 'sounds/ChatIncoming.wav' %}" preload="none"></audio>
		<audio id="chatOutgoing" src="{% md5url 'sounds/ChatOutgoing.wav' %}" preload="none"></audio>
		<audio id="chatLogin" src="{% md5url 'sounds/ChatLogin.wav' %}" preload="none" ></audio>
		<audio id="chatLogout" src="{% md5url 'sounds/ChatLogout.wav' %}" preload="none"></audio>
	</div>
	<div id="wrapper" class="max-height-scrollable" style="position: relative">
		<div id="chatbox" tabindex="0">
			<div>
			</div>
		</div>{% comment %}tabindex allows focus, focus allows keydown binding event{% endcomment %}
		<div id="chat-room-users-wrapper" class="very-small-screen">
			<table id="chat-user-table">
				<tr></tr>
			</table>
			<div id="rooms">
			</div>
		</div>
		<div id="smileParentHolder" class="padding10" onclick="addSmile(event);">
			<ul id="tabNames"></ul>
		</div>
	</div>
	<div class="fullwidth-padded box-shadow" style="position: relative">
		<div id="userSendMessageTo">
			<div id="receiverId"></div>
			<i class="icon-cancel" onclick="hideUserSendToName();"></i>
		</div>
		<i class="icon-smile" title="Add a smile :)" onclick="toggleSmileys(event)"></i>
		<div contenteditable="true" id="usermsg"></div>
	</div>
	<div id="callContainerParent" class="hidden">
		<div id="callContainer">
			<div class="callContainerHeader">
				<div style="display: inline-block">Make a call</div>
				<i class="icon-cancel" style="float: right; color: #AE0F0F"
					onclick="CssUtils.hideElement($('callContainerParent'))"></i>
			</div>
			<div class="callContainerContent">
				<ul id="callUserList">
				</ul>
				<div class="callContainerIcons noSelection">
					<i class="icon-mic"
						onclick="CssUtils.toggleClass(this, 'callActiveIcon')"></i>
					<i class="icon-videocam"
						onclick="CssUtils.toggleClass(this, 'callActiveIcon')"></i>
					<i class="icon-phone-circled" onclick="createCall()"></i>
				</div>
			</div>
		</div>
	</div>
{% endblock %}